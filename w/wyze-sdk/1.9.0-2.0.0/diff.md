# Comparing `tmp/wyze_sdk-1.9.0-py3-none-any.whl.zip` & `tmp/wyze_sdk-2.0.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,52 +1,52 @@
-Zip file size: 96908 bytes, number of entries: 50
+Zip file size: 98367 bytes, number of entries: 50
 -rw-r--r--  2.0 unx     1101 b- defN 21-Apr-22 16:26 wyze_sdk/__init__.py
--rw-r--r--  2.0 unx       22 b- defN 22-Dec-09 13:27 wyze_sdk/version.py
+-rw-r--r--  2.0 unx       22 b- defN 23-Jul-22 21:57 wyze_sdk/version.py
 -rw-r--r--  2.0 unx       34 b- defN 21-Apr-22 16:26 wyze_sdk/api/__init__.py
 -rw-r--r--  2.0 unx     3528 b- defN 22-Dec-09 13:27 wyze_sdk/api/base.py
--rw-r--r--  2.0 unx     7568 b- defN 22-Dec-09 13:14 wyze_sdk/api/client.py
+-rw-r--r--  2.0 unx     9641 b- defN 23-Jul-22 21:56 wyze_sdk/api/client.py
 -rw-r--r--  2.0 unx     2295 b- defN 21-Apr-30 17:39 wyze_sdk/api/events.py
 -rw-r--r--  2.0 unx      410 b- defN 22-Dec-09 13:14 wyze_sdk/api/devices/__init__.py
 -rw-r--r--  2.0 unx    14408 b- defN 22-Oct-27 00:46 wyze_sdk/api/devices/bulbs.py
 -rw-r--r--  2.0 unx     3110 b- defN 21-Aug-11 16:33 wyze_sdk/api/devices/cameras.py
 -rw-r--r--  2.0 unx    11836 b- defN 22-Oct-20 16:57 wyze_sdk/api/devices/locks.py
 -rw-r--r--  2.0 unx     5612 b- defN 22-Nov-10 13:08 wyze_sdk/api/devices/plugs.py
--rw-r--r--  2.0 unx     9442 b- defN 22-Dec-09 13:27 wyze_sdk/api/devices/scales.py
+-rw-r--r--  2.0 unx     9384 b- defN 23-May-06 21:48 wyze_sdk/api/devices/scales.py
 -rw-r--r--  2.0 unx     2896 b- defN 21-Apr-30 17:00 wyze_sdk/api/devices/sensors.py
 -rw-r--r--  2.0 unx     5208 b- defN 22-Dec-09 13:14 wyze_sdk/api/devices/switches.py
 -rw-r--r--  2.0 unx    14361 b- defN 22-Nov-03 19:02 wyze_sdk/api/devices/thermostats.py
 -rw-r--r--  2.0 unx    12932 b- defN 22-Nov-03 19:02 wyze_sdk/api/devices/vacuums.py
 -rw-r--r--  2.0 unx     1529 b- defN 21-Apr-30 18:55 wyze_sdk/errors/__init__.py
 -rw-r--r--  2.0 unx     8087 b- defN 22-Oct-20 16:57 wyze_sdk/models/__init__.py
--rw-r--r--  2.0 unx     3389 b- defN 22-Dec-09 13:27 wyze_sdk/models/devices/__init__.py
--rw-r--r--  2.0 unx    16964 b- defN 22-Dec-09 13:27 wyze_sdk/models/devices/base.py
--rw-r--r--  2.0 unx    10469 b- defN 22-Oct-27 00:46 wyze_sdk/models/devices/bulbs.py
--rw-r--r--  2.0 unx     8555 b- defN 21-May-12 15:31 wyze_sdk/models/devices/cameras.py
--rw-r--r--  2.0 unx    16373 b- defN 22-Oct-27 00:46 wyze_sdk/models/devices/lights.py
+-rw-r--r--  2.0 unx     3389 b- defN 23-Jan-03 16:17 wyze_sdk/models/devices/__init__.py
+-rw-r--r--  2.0 unx    16964 b- defN 23-Feb-05 19:49 wyze_sdk/models/devices/base.py
+-rw-r--r--  2.0 unx    10469 b- defN 23-Feb-05 19:59 wyze_sdk/models/devices/bulbs.py
+-rw-r--r--  2.0 unx     8555 b- defN 23-May-06 21:48 wyze_sdk/models/devices/cameras.py
+-rw-r--r--  2.0 unx    16373 b- defN 23-Feb-05 19:59 wyze_sdk/models/devices/lights.py
 -rw-r--r--  2.0 unx    31586 b- defN 22-Nov-10 13:08 wyze_sdk/models/devices/locks.py
 -rw-r--r--  2.0 unx     6444 b- defN 22-Nov-10 13:08 wyze_sdk/models/devices/plugs.py
 -rw-r--r--  2.0 unx     9277 b- defN 22-Dec-09 13:27 wyze_sdk/models/devices/scales.py
 -rw-r--r--  2.0 unx     4406 b- defN 22-Oct-04 23:00 wyze_sdk/models/devices/sensors.py
 -rw-r--r--  2.0 unx     5485 b- defN 22-Dec-09 13:14 wyze_sdk/models/devices/switches.py
 -rw-r--r--  2.0 unx    29016 b- defN 22-Nov-03 19:02 wyze_sdk/models/devices/thermostats.py
 -rw-r--r--  2.0 unx    40302 b- defN 22-Nov-03 19:02 wyze_sdk/models/devices/vacuums.py
 -rw-r--r--  2.0 unx     6744 b- defN 21-Apr-30 18:34 wyze_sdk/models/events/__init__.py
 -rw-r--r--  2.0 unx      599 b- defN 22-Dec-09 13:27 wyze_sdk/service/__init__.py
 -rw-r--r--  2.0 unx    17180 b- defN 22-Dec-05 00:36 wyze_sdk/service/api_service.py
--rw-r--r--  2.0 unx     3685 b- defN 21-May-22 15:36 wyze_sdk/service/auth_service.py
--rw-r--r--  2.0 unx    14313 b- defN 22-Dec-09 13:13 wyze_sdk/service/base.py
+-rw-r--r--  2.0 unx     4022 b- defN 23-Jul-22 21:56 wyze_sdk/service/auth_service.py
+-rw-r--r--  2.0 unx    14548 b- defN 22-Dec-09 13:31 wyze_sdk/service/base.py
 -rw-r--r--  2.0 unx     3842 b- defN 22-Nov-03 19:02 wyze_sdk/service/earth_service.py
 -rw-r--r--  2.0 unx     9654 b- defN 22-Oct-20 16:57 wyze_sdk/service/ford_service.py
 -rw-r--r--  2.0 unx     2645 b- defN 21-Apr-30 14:03 wyze_sdk/service/general_api_service.py
 -rw-r--r--  2.0 unx     1852 b- defN 21-Apr-28 16:11 wyze_sdk/service/platform_service.py
 -rw-r--r--  2.0 unx     8430 b- defN 22-Dec-09 13:27 wyze_sdk/service/pluto_service.py
 -rw-r--r--  2.0 unx     8381 b- defN 21-May-22 16:19 wyze_sdk/service/scale_service.py
 -rw-r--r--  2.0 unx     3853 b- defN 22-Dec-09 13:14 wyze_sdk/service/sirius_service.py
 -rw-r--r--  2.0 unx     9332 b- defN 22-Nov-03 19:02 wyze_sdk/service/venus_service.py
--rw-r--r--  2.0 unx     5009 b- defN 22-Dec-09 13:13 wyze_sdk/service/wyze_response.py
+-rw-r--r--  2.0 unx     5030 b- defN 22-Dec-09 13:31 wyze_sdk/service/wyze_response.py
 -rw-r--r--  2.0 unx     3369 b- defN 22-Oct-20 16:57 wyze_sdk/signature/__init__.py
--rw-r--r--  2.0 unx     1210 b- defN 22-Dec-09 13:28 wyze_sdk-1.9.0.dist-info/LICENSE
--rw-r--r--  2.0 unx     9057 b- defN 22-Dec-09 13:28 wyze_sdk-1.9.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 22-Dec-09 13:28 wyze_sdk-1.9.0.dist-info/WHEEL
--rw-r--r--  2.0 unx        9 b- defN 22-Dec-09 13:28 wyze_sdk-1.9.0.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     4339 b- defN 22-Dec-09 13:28 wyze_sdk-1.9.0.dist-info/RECORD
-50 files, 400240 bytes uncompressed, 90002 bytes compressed:  77.5%
+-rw-r--r--  2.0 unx     1210 b- defN 23-Jul-22 21:58 wyze_sdk-2.0.0.dist-info/LICENSE
+-rw-r--r--  2.0 unx    11605 b- defN 23-Jul-22 21:58 wyze_sdk-2.0.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jul-22 21:58 wyze_sdk-2.0.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        9 b- defN 23-Jul-22 21:58 wyze_sdk-2.0.0.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     4340 b- defN 23-Jul-22 21:58 wyze_sdk-2.0.0.dist-info/RECORD
+50 files, 405397 bytes uncompressed, 91461 bytes compressed:  77.4%
```

## zipnote {}

```diff
@@ -129,23 +129,23 @@
 
 Filename: wyze_sdk/service/wyze_response.py
 Comment: 
 
 Filename: wyze_sdk/signature/__init__.py
 Comment: 
 
-Filename: wyze_sdk-1.9.0.dist-info/LICENSE
+Filename: wyze_sdk-2.0.0.dist-info/LICENSE
 Comment: 
 
-Filename: wyze_sdk-1.9.0.dist-info/METADATA
+Filename: wyze_sdk-2.0.0.dist-info/METADATA
 Comment: 
 
-Filename: wyze_sdk-1.9.0.dist-info/WHEEL
+Filename: wyze_sdk-2.0.0.dist-info/WHEEL
 Comment: 
 
-Filename: wyze_sdk-1.9.0.dist-info/top_level.txt
+Filename: wyze_sdk-2.0.0.dist-info/top_level.txt
 Comment: 
 
-Filename: wyze_sdk-1.9.0.dist-info/RECORD
+Filename: wyze_sdk-2.0.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## wyze_sdk/version.py

```diff
@@ -1 +1 @@
-__version__ = "1.9.0"
+__version__ = "2.0.0"
```

## wyze_sdk/api/client.py

```diff
@@ -35,32 +35,45 @@
     """
     _logger = logging.getLogger(__name__)
     _token: str = None
     _user_id: str = None
 
     def __init__(
         self,
+        token: Optional[str] = None,
+        refresh_token: Optional[str] = None,
         email: Optional[str] = None,
         password: Optional[str] = None,
+        key_id: Optional[str] = None,
+        api_key: Optional[str] = None,
         totp_key: Optional[str] = None,
         base_url: Optional[str] = None,
         timeout: int = 30,
     ):
+        #: A string used for API-based requests
+        self._token = None if token is None else token.strip()
+        #: A string that can be used to rotate the authentication token
+        self._refresh_token = None if refresh_token is None else refresh_token.strip()
         #: A string specifying the account email address.
-        self._email = email
+        self._email = None if email is None else email.strip()
         #: An unencrypted string specifying the account password.
-        self._password = password
+        self._password = None if password is None else password.strip()
+        # A string used for API-based requests
+        self._key_id = key_id.strip() if key_id else None
+        # A string used for API-based requests
+        self._api_key = api_key.strip() if api_key else None
         #: An unencrypted string specifying the TOTP Key for automatic TOTP 2FA verification code generation.
-        self._totp_key = totp_key
+        self._totp_key = None if totp_key is None else totp_key.strip()
         #: An optional string representing the API base URL. **This should not be used except for when running tests.**
         self._base_url = base_url
         #: The maximum number of seconds the client will wait to connect and receive a response from Wyze. Defaults to 30
         self.timeout = timeout
 
-        self.login()
+        if self._token is None and self._email is not None:
+            self.login()
 
     @property
     def vacuums(self) -> VacuumsClient:
         return VacuumsClient(token=self._token, base_url=self._base_url)
 
     @property
     def thermostats(self) -> ThermostatsClient:
@@ -121,31 +134,69 @@
         self._logger.debug("refreshing session data")
         self._token = access_token
         self._refresh_token = refresh_token
         if user_id:
             self._user_id = user_id
             self._logger.debug("wyze user : %s", self._user_id)
 
-    def login(self) -> WyzeResponse:
+    def login(
+        self,
+        email: str = None,
+        password: str = None,
+        key_id: str = None,
+        api_key: str = None,
+        totp_key: Optional[str] = None,
+    ) -> WyzeResponse:
         """
         Exchanges email and password for an ``access_token`` and a ``refresh_token``, which
         are stored in this client. The tokens will be used for all subsequent requests
         made by this ``Client`` unless ``refresh_token()`` is called.
 
         :rtype: WyzeResponse
 
-        :raises WyzeClientConfigurationError: If ``access_point`` is already set or both ``email`` and ``password`` are not set.
+        :raises WyzeClientConfigurationError: If ``access_token`` is already set or both ``email`` and ``password`` are not set.
         """
         if self._token is not None:
             raise WyzeClientConfigurationError("already logged in")
+
+        # if an email/password is provided, use them. Otherwise, use the ones
+        # provided when constructing the client.
+        if email is not None:
+            self._email = email.strip()
+        if password is not None:
+            self._password = password.strip()
+        if key_id is not None:
+            self._key_id = key_id.strip()
+        if api_key is not None:
+            self._api_key = api_key.strip()
+        if totp_key is not None:
+            self._totp_key = totp_key.strip()
         if self._email is None or self._password is None:
             raise WyzeClientConfigurationError("must provide email and password")
-        self._logger.debug(f"access token not provided, attempting to login as {self._email}")
-        response = self._auth_client().user_login(email=self._email, password=self._password, totp_key=self._totp_key)
-        self._update_session(access_token=response["access_token"], refresh_token=response["refresh_token"], user_id=response["user_id"])
+        if self._key_id is None or self._api_key is None:
+            raise WyzeClientConfigurationError(
+                "Must provide a Wyze API key and id.\n\n" +
+                "As of July 2023, users must provide an api key and key id to create an access token. " +
+                "For more information, please visit https://support.wyze.com/hc/en-us/articles/16129834216731."
+            )
+        self._logger.debug(
+            f"access token not provided, attempting to login as {self._email}"
+        )
+        response = self._auth_client().user_login(
+            email=self._email,
+            password=self._password,
+            key_id=self._key_id,
+            api_key=self._api_key,
+            totp_key=self._totp_key,
+        )
+        self._update_session(
+            access_token=response["access_token"],
+            refresh_token=response["refresh_token"],
+            user_id=response["user_id"],
+        )
         return response
 
     def refresh_token(self) -> WyzeResponse:
         """
         Updates ``access_token`` using the previously set ``refresh_token``.
 
         :rtype: WyzeResponse
```

## wyze_sdk/api/devices/scales.py

```diff
@@ -65,19 +65,18 @@
         if scale['product_model'] in DeviceModels.SCALE_S:
 
             # // this returns the same data as above
             # device_info = super()._scale_client(scale['product_model']).get_device_info(did=device_mac)
             # if "data" in device_info.data:
             #     scale.update(device_info.data["data"])
 
-            if self._user_id is not None:
-                now = datetime.now()
-                latest_records = super()._scale_client(scale['product_model']).get_records(user_id=self._user_id, start_time=now-timedelta(days=5), end_time=now)
-                if "data" in latest_records.data and latest_records.data['data'] is not None:
-                    scale.update({"latest_records": latest_records.data["data"]})
+            now = datetime.now()
+            latest_records = super()._scale_client(scale['product_model']).get_records(user_id=self._user_id, start_time=now-timedelta(days=5), end_time=now)
+            if "data" in latest_records.data and latest_records.data['data'] is not None:
+                scale.update({"latest_records": latest_records.data["data"]})
         elif scale['product_model'] in DeviceModels.SCALE_X:
             raise WyzeFeatureNotSupportedError('Scale Series X')
         else:
             token = super()._scale_client().get_token(did=device_mac)
             if "data" in token.data and token.data['data'] is not None:
                 scale.update(token.data["data"])
```

## wyze_sdk/service/auth_service.py

```diff
@@ -1,12 +1,14 @@
 from __future__ import annotations
 
 from typing import Dict, Optional
 
 from mintotp import totp
+
+from wyze_sdk import version
 from wyze_sdk.signature import RequestVerifier
 
 from .base import ExServiceClient, WyzeResponse
 
 
 class AuthServiceClient(ExServiceClient):
     """
@@ -58,26 +60,40 @@
             http_verb=http_verb,
             params=params,
             json=json,
             headers=self._get_headers(request_specific_headers=request_specific_headers, nonce=nonce),
             nonce=nonce,
         )
 
-    def user_login(self, *, email: str, password: str, totp_key: Optional[str] = None, **kwargs) -> WyzeResponse:
+    def user_login(
+        self,
+        *,
+        email: str,
+        password: str,
+        key_id: Optional[str] = None,
+        api_key: Optional[str] = None,
+        totp_key: Optional[str] = None,
+        **kwargs,
+    ) -> WyzeResponse:
         nonce = self.request_verifier.clock.nonce()
         password = self.request_verifier.md5_string(
             self.request_verifier.md5_string(self.request_verifier.md5_string(password))
         )
-        kwargs.update({
-            'nonce': str(nonce),
-            'email': email,
-            'password': password
-        })
-        response = self.api_call('/user/login', json=kwargs, nonce=nonce)
-        if response['access_token']:
+        kwargs.update({"nonce": str(nonce), "email": email, "password": password})
+        api_headers = {
+            "keyid": key_id,
+            "apikey": api_key,
+            "user-agent": f"wyze-sdk-{version.__version__}",
+        }
+
+        response = self.api_call(
+            '/api/user/login', json=kwargs, request_specific_headers=api_headers, nonce=nonce
+        )
+
+        if response["access_token"]:
             return response
 
         if 'TotpVerificationCode' in response.get('mfa_options'):
             # TOTP 2FA
             mfa_type = 'TotpVerificationCode'
             if totp_key:
                 verification_code = totp(totp_key)
```

## wyze_sdk/service/base.py

```diff
@@ -75,34 +75,42 @@
         suffix = f" {suffix}" if suffix else ""
         return prefix + user_agent_string + suffix
 
     def _do_request(
             self,
             session: requests.Session,
             request: requests.Request) -> WyzeResponse:
-        with suppress(requests.exceptions.HTTPError, requests.exceptions.RequestException, ValueError):
+        try:
             self._logger.info(f"requesting {request.method} to {request.url}")
             self._logger.debug(f"headers: {request.headers}")
             self._logger.debug(f"body: {request.body}")
 
             settings = session.merge_environment_settings(request.url, {}, None, None, None)
 
             self._logger.debug(f"settings: {settings}")
 
             response = session.send(request, **settings)
 
+            response.raise_for_status()
+
             return WyzeResponse(
                 client=self,
                 http_verb=request.method,
                 api_url=request.url,
                 req_args=request.body,
                 data=response.json(),
                 headers=response.headers,
                 status_code=response.status_code,
             ).validate()
+        except requests.exceptions.HTTPError as err:
+            # this is a placeholder for future retry logic - for now, raise the err
+            raise err
+        except Exception as e:
+            self._logger.debug(f"Failed to send a request to server: {e}")
+            raise e
 
     def do_post(self, url: str, headers: dict, payload: dict, params: Optional[dict] = None) -> WyzeResponse:
         with requests.Session() as client:
             if headers is not None:
                 # add the request-specific headers
                 self._logger.debug('merging request-specific headers into session headers')
                 client.headers.update(headers)
```

## wyze_sdk/service/wyze_response.py

```diff
@@ -126,17 +126,17 @@
         if response_code == 1000:
             if "Too many failed attempts" in msg:
                 message = "The user account has too many failed login attempts. Please wait a bit and try again."
             elif "Invalid User Name or Password" in msg:
                 message = "The username or password is incorrect. Please check your credentials and try again."
         elif response_code in [1001, 1004]:
             message = "Parameters passed to Wyze Service do not fit the endpoint"
-        elif response_code == [1003, 2001]:
+        elif response_code in [1003]:
             message = "Unknown request error"  # FIXME what do I mean?
-        elif msg == 'AccessTokenError':
+        elif response_code in [2001] or msg == 'AccessTokenError':
             message = "The access token has expired. Please refresh the token and try again."
         elif msg == 'UserIsLocked':
             message = "The user account is locked. Please resolve this issue and try again."
         elif msg == 'UserNameOrPasswordError':
             message = "The username or password is incorrect. Please check your credentials and try again."
 
         raise e.WyzeApiError(message, self.data)
```

## Comparing `wyze_sdk-1.9.0.dist-info/LICENSE` & `wyze_sdk-2.0.0.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `wyze_sdk-1.9.0.dist-info/METADATA` & `wyze_sdk-2.0.0.dist-info/METADATA`

 * *Files 20% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: wyze-sdk
-Version: 1.9.0
+Version: 2.0.0
 Summary: The Wyze Labs API Platform SDK for Python.
 Home-page: https://github.com/shauntarves/wyze-sdk
 Author: Shaun Tarves
 Author-email: shaun@tarves.net
 License: The Unlicense
 Keywords: wyze,wyze-labs,wyze-sdk,wyze-api,wyzeapy,wyze-apy,smart home,home automation
 Classifier: Development Status :: 5 - Production/Stable
@@ -80,24 +80,107 @@
 
 ### Basic Usage of the Web Client
 
 ---
 
 Wyze does not provide a Web API that gives you the ability to build applications that interact with Wyze devices. This Development Kit is a reverse-engineered, module-based wrapper that makes interaction with that API possible. We have a few basic examples here with some of the more common uses but you are encouraged to [explore the full range of methods](https://wyze-sdk.readthedocs.io/en/latest/wyze_sdk.api.devices.html) available to you.
 
+#### Authenticating
+
+When performing user "authentication" with an email and password in the Wyze app, the credentials are exchanged for an access token and a refrsh token. These are long strings of the form `lvtx.XXXX`. When using this library, be aware that there are two method for handling authentiation:
+
+##### Obtaining the Token and Storing it for Later Use (Preferred)
+
+It is preferred that users first create an empty `Client` object and use the `login()` method to perform the token exchange.
+
+```python
+import os
+from wyze_sdk import Client
+
+response = Client().login(email=os.environ['WYZE_EMAIL'], password=os.environ['WYZE_PASSWORD'])
+print(f"access token: {response['access_token']}")
+print(f"refresh token: {response['refresh_token']}")
+```
+
+The returned values can be stored on disk or as environment variables for use in subsequent calls.
+
+```python
+import os
+from wyze_sdk import Client
+
+client = Client(token=os.environ['WYZE_ACCESS_TOKEN'])
+...
+```
+
+##### (Deprecated) Automatically Authenticate Every New Client
+
+This method has been deprecated due to issues with authentication rate limiting. While it is still a perfectly usable approach for testing or performing infrequent client actions, it **is not recommended** if you are scripting with this client library.
+
+```python
+import os
+from wyze_sdk import Client
+from wyze_sdk.errors import WyzeApiError
+
+client = Client(email=os.environ['WYZE_EMAIL'], password=os.environ['WYZE_PASSWORD'])
+...
+```
+
+##### Wyze API Key/ID Support
+
+Visit the Wyze developer API portal to generate an API ID/KEY: https://developer-api-console.wyze.com/#/apikey/view
+
+```python
+import os
+from wyze_sdk import Client
+
+response = Client().login(
+    email=os.environ['WYZE_EMAIL'],
+    password=os.environ['WYZE_PASSWORD'],
+    key_id=os.environ['WYZE_KEY_ID'],
+    api_key=os.environ['WYZE_API_KEY']
+)
+...
+```
+
+##### Multi-Factor Authentication (2FA) Support
+
+If your Wyze account has multi-factor authentication (2FA) enabled, you may be prompted for your 2FA code when authenticating via either supported method described above. If you wish to automate the MFA interaction, both the `Client` constructor and the `login()` method accept `totp_key` as input. If the TOTP key is provided, the MFA prompt should not appear.
+
+```python
+import os
+from wyze_sdk import Client
+
+response = Client().login(
+  email=os.environ['WYZE_EMAIL'],
+  password=os.environ['WYZE_PASSWORD'],
+  totp_key=os.environ['WYZE_TOTP_KEY']
+)
+
+OR
+
+client = Client(
+  email=os.environ['WYZE_EMAIL'],
+  password=os.environ['WYZE_PASSWORD'],
+  totp_key=os.environ['WYZE_TOTP_KEY']
+)
+...
+```
+
+**Note: This does not work with SMS or email-based MFA.**
+
 #### Listing devices in your Wyze account
 
 One of the most common use-cases is querying device state from Wyze. If you want to access devices you own, or devices shared to you, this method will do both.
 
 ```python
 import os
 from wyze_sdk import Client
 from wyze_sdk.errors import WyzeApiError
 
-client = Client(email=os.environ['WYZE_EMAIL'], password=os.environ['WYZE_PASSWORD'])
+client = Client(token=os.environ['WYZE_ACCESS_TOKEN'])
 
 try:
     response = client.devices_list()
     for device in client.devices_list():
         print(f"mac: {device.mac}")
         print(f"nickname: {device.nickname}")
         print(f"is_online: {device.is_online}")
@@ -113,15 +196,15 @@
 
 ```python
 import os
 from datetime import timedelta
 from wyze_sdk import Client
 from wyze_sdk.errors import WyzeApiError
 
-client = Client(email=os.environ['WYZE_EMAIL'], password=os.environ['WYZE_PASSWORD'])
+client = Client(token=os.environ['WYZE_ACCESS_TOKEN'])
 
 try:
   plug = client.plugs.info(device_mac='ABCDEF1234567890')
   print(f"power: {plug.is_on}")
   print(f"online: {plug.is_online}")
 
   if plug.is_on:
@@ -141,15 +224,15 @@
 Every Wyze device has myriad properties and attributes that can be set in a common, intuitive way.
 
 ```python
 import os
 from wyze_sdk import Client
 from wyze_sdk.errors import WyzeApiError
 
-client = Client(email=os.environ['WYZE_EMAIL'], password=os.environ['WYZE_PASSWORD'])
+client = Client(token=os.environ['WYZE_ACCESS_TOKEN'])
 
 try:
   bulb = client.bulbs.info(device_mac='ABCDEF1234567890')
   print(f"power: {bulb.is_on}")
   print(f"online: {bulb.is_online}")
   print(f"brightness: {bulb.brightness}")
   print(f"temp: {bulb.color_temp}")
@@ -177,15 +260,15 @@
 
 ```python
 import os
 import wyze_sdk
 from wyze_sdk import Client
 from wyze_sdk.errors import WyzeApiError
 
-client = Client(email=os.environ['WYZE_EMAIL'], password=os.environ['WYZE_PASSWORD'])
+client = Client(token=os.environ['WYZE_ACCESS_TOKEN'])
 
 try:
   lock = client.locks.info(device_mac='YD.LO1.abcdefg0123456789abcdefg0123456789')
   if lock is not None:
     print(f"is open: {lock.is_open}")
     print(f"is locked: {lock.is_locked}")
```

## Comparing `wyze_sdk-1.9.0.dist-info/RECORD` & `wyze_sdk-2.0.0.dist-info/RECORD`

 * *Files 7% similar despite different names*

```diff
@@ -1,19 +1,19 @@
 wyze_sdk/__init__.py,sha256=WDbE_JZxFGPqdslAgnPTsn06IbtQdPVINZTo6ewr9B4,1101
-wyze_sdk/version.py,sha256=ljy9wwnU6FSzJrHgJSWUcZ_nIboERJauUm7HTpNQfNg,22
+wyze_sdk/version.py,sha256=_7OlQdbVkK4jad0CLdpI0grT-zEAb-qgFmH5mFzDXiA,22
 wyze_sdk/api/__init__.py,sha256=qoM3Y01eYX5cAVd1kmOyatN7xkoJrT1xOHYOj3i9AQ4,34
 wyze_sdk/api/base.py,sha256=Lk-m27JEygRW7qMT6ztGeb52DX40bwMUylfTSABPjBc,3528
-wyze_sdk/api/client.py,sha256=ddYmt6vZGNxoW0OlpGPbPzMKDNWybsvRyFC_XOSCbw0,7568
+wyze_sdk/api/client.py,sha256=e8UR9E0yVyuYjq1McWufYyR4kPPyFqLU2MJZv7TuG9k,9641
 wyze_sdk/api/events.py,sha256=Hy9bSvjAlJ9lbJaJiyIslvarF0oJl5cmvBfrI6Yz9bQ,2295
 wyze_sdk/api/devices/__init__.py,sha256=B7sBFTB6G1AALf1WHsSdDq4_IVP1ZgwqcAOTs9c1OgM,410
 wyze_sdk/api/devices/bulbs.py,sha256=7uYrd3iDS-qyXBEcH__kyEvihImdsOo07n_t8Fo9R6s,14408
 wyze_sdk/api/devices/cameras.py,sha256=HXnqg1m-sAOf94Mg8vWMPzAvbq3kfdvLeLL24S3WPV0,3110
 wyze_sdk/api/devices/locks.py,sha256=7pHZQ9jfVB2Voh-7hyBl8xMxJvkJCGNMhklVHXFf3dc,11836
 wyze_sdk/api/devices/plugs.py,sha256=z2ltAlME-mjhoWdQuoIp2i4Nd_bCU0ywdF9VVQx8azA,5612
-wyze_sdk/api/devices/scales.py,sha256=c21swL0ubtw8lFM1bFv4hwXdVRIfAoQgvMAvZjnjwlQ,9442
+wyze_sdk/api/devices/scales.py,sha256=2ky-2JNYmYhkYp9Lf9RAeG-FSmiIZuLSNcGgFH2G8Ks,9384
 wyze_sdk/api/devices/sensors.py,sha256=vki-Og0x3qOnbL1rTy5j6sR79aLEpaV1I5xlfTLRutE,2896
 wyze_sdk/api/devices/switches.py,sha256=AIEeR8zFJnlVwldSnbbRUfYo0iSceAr-N3mmyHPqTxQ,5208
 wyze_sdk/api/devices/thermostats.py,sha256=WGYkeNpWJzDR1W06CVDQlVTZXOlLwgj-BiThx4u-mrM,14361
 wyze_sdk/api/devices/vacuums.py,sha256=5UceVUgLDamfKRRc6MkljPOPkDW2jIOsqYAlvS3oMwo,12932
 wyze_sdk/errors/__init__.py,sha256=Vw4TgejcuM8MNJ-gg7XhJhmcmW4nARO8IzPWgB4rbuw,1529
 wyze_sdk/models/__init__.py,sha256=Q9Pi0UvwgzvaV7wusVZXNnx7AZWLWhKvMagmch7QlNg,8087
 wyze_sdk/models/devices/__init__.py,sha256=N1dS1swXzViBoxirG9d3_wlDhnRnlwOYsSvq20Qv6QU,3389
@@ -27,24 +27,24 @@
 wyze_sdk/models/devices/sensors.py,sha256=APP2SRGhkWUFEXltNxhc6u9BXnSEzI0oqK5cgINCdK8,4406
 wyze_sdk/models/devices/switches.py,sha256=CrDJFdSVunJxiz8C4grh4TiG2vJZiO7g2J7DOnZaHqk,5485
 wyze_sdk/models/devices/thermostats.py,sha256=Q146J34FGh3he9_TNqVya1oQoXybxbFguiqt39MPdhs,29016
 wyze_sdk/models/devices/vacuums.py,sha256=WrAVMoTSOo9DtliuuE_EsVrfJzu9J01YMIxd7CtP-as,40302
 wyze_sdk/models/events/__init__.py,sha256=Bri-kXGYiEuAYV87nyBeLxemI1EzbEIy9J8ViF9lpvs,6744
 wyze_sdk/service/__init__.py,sha256=PZe-iOGpKIgozUCNDXaOnbpHQRjtuR96Zgm2yABPPQY,599
 wyze_sdk/service/api_service.py,sha256=aDu5c7ZimNyZJOWARmli-GeJZT_75_h_L1_G--WOExA,17180
-wyze_sdk/service/auth_service.py,sha256=SRbg57NMu21j8mtBk6k1mS2-djal9RC43lWi5HSSky0,3685
-wyze_sdk/service/base.py,sha256=enQLTJGr3u3-8OK9C3fqD0-uIgAxgYYHkyjYHamXU9Y,14313
+wyze_sdk/service/auth_service.py,sha256=rkU5eyMS4GiCrPrh-Id0DIGMdJDARbv465vLKelABrU,4022
+wyze_sdk/service/base.py,sha256=hSdwmS-HNKpoRozhlqHn62yeZOgg-5vPauC2eRTi-hA,14548
 wyze_sdk/service/earth_service.py,sha256=TiC_jTLxn4V3C4CWMiMTYBEuZCfs-p2-6e1HgWvfhAQ,3842
 wyze_sdk/service/ford_service.py,sha256=EGbQr6jG8zVhjthHRXmjTSMp0pL52P0kS_A5YdfC9gU,9654
 wyze_sdk/service/general_api_service.py,sha256=IeVfp4W-MJRETZYxuaOc_-Vf-R9Kzq7lYCUK1Gf-S7E,2645
 wyze_sdk/service/platform_service.py,sha256=6dkExvTGO9D6PECz41vIO2ZViWTg4L-PqZ5kSoYQ8_Y,1852
 wyze_sdk/service/pluto_service.py,sha256=TPv4Y9JvSi5_Gn0kxZGtmmsQt1eOwjAcaMCyOJMqkC4,8430
 wyze_sdk/service/scale_service.py,sha256=sOL9l_0vYGQFB3DiLKStZvYtrtfv0oXpoQobVcAUSVg,8381
 wyze_sdk/service/sirius_service.py,sha256=Bf78YkMpz5IDhxZWYYEhKPOwcToRCHZr2tdWcFf4qqM,3853
 wyze_sdk/service/venus_service.py,sha256=1RqMwr6vIkpmY4jYmFkyvc431jqVarSmcH0yTmxfcjY,9332
-wyze_sdk/service/wyze_response.py,sha256=PFuMIekAcQaxPYREZxW8dFC9e5eO08IKWl9v7M-y408,5009
+wyze_sdk/service/wyze_response.py,sha256=4O6FFuksZmvsDVJHvpW86QePCMGo_eiTCBqwzXPbCVU,5030
 wyze_sdk/signature/__init__.py,sha256=bAAl1K0NJbZWsYJCRXZLTYc1NMXPctWvLJefQRS4uFs,3369
-wyze_sdk-1.9.0.dist-info/LICENSE,sha256=yiq99pWITHfqS0pbZMp7cy2dnbreTuvBwudsU-njvIM,1210
-wyze_sdk-1.9.0.dist-info/METADATA,sha256=bKuc_vgstojaicIODzYgfIepzo9R8AjbVrESoX-R8Tc,9057
-wyze_sdk-1.9.0.dist-info/WHEEL,sha256=OqRkF0eY5GHssMorFjlbTIq072vpHpF60fIQA6lS9xA,92
-wyze_sdk-1.9.0.dist-info/top_level.txt,sha256=QxEVmNV7nxNfvUaRUA0-4DImPKM9gsHJINNozrTTIFM,9
-wyze_sdk-1.9.0.dist-info/RECORD,,
+wyze_sdk-2.0.0.dist-info/LICENSE,sha256=yiq99pWITHfqS0pbZMp7cy2dnbreTuvBwudsU-njvIM,1210
+wyze_sdk-2.0.0.dist-info/METADATA,sha256=YiF3lB2XyEAJUnJZVQU0vcviX_g9SJc5KeJGi8Nf434,11605
+wyze_sdk-2.0.0.dist-info/WHEEL,sha256=OqRkF0eY5GHssMorFjlbTIq072vpHpF60fIQA6lS9xA,92
+wyze_sdk-2.0.0.dist-info/top_level.txt,sha256=QxEVmNV7nxNfvUaRUA0-4DImPKM9gsHJINNozrTTIFM,9
+wyze_sdk-2.0.0.dist-info/RECORD,,
```

