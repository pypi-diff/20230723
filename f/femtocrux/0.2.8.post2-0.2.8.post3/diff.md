# Comparing `tmp/femtocrux-0.2.8.post2-py3-none-any.whl.zip` & `tmp/femtocrux-0.2.8.post3-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,23 +1,23 @@
-Zip file size: 18362 bytes, number of entries: 21
--rwxr-xr-x  2.0 unx     1389 b- defN 23-Jul-13 19:26 femtocrux/ENV_REQUIREMENTS.sh
--rw-r--r--  2.0 unx      308 b- defN 23-Jul-13 19:26 femtocrux/PY_REQUIREMENTS
--rw-r--r--  2.0 unx        8 b- defN 23-Jul-13 19:26 femtocrux/VERSION
--rw-r--r--  2.0 unx      100 b- defN 23-Jul-13 19:26 femtocrux/__init__.py
--rw-r--r--  2.0 unx      162 b- defN 23-Jul-13 19:26 femtocrux/version.py
--rw-r--r--  2.0 unx        0 b- defN 23-Jul-13 19:26 femtocrux/client/__init__.py
--rw-r--r--  2.0 unx    20409 b- defN 23-Jul-13 19:26 femtocrux/client/client.py
--rw-r--r--  2.0 unx      168 b- defN 23-Jul-13 19:26 femtocrux/grpc/__init__.py
--rw-r--r--  2.0 unx     4340 b- defN 23-Jul-13 19:31 femtocrux/grpc/compiler_service_pb2.py
--rw-r--r--  2.0 unx     7002 b- defN 23-Jul-13 19:31 femtocrux/grpc/compiler_service_pb2_grpc.py
--rw-r--r--  2.0 unx        0 b- defN 23-Jul-13 19:26 femtocrux/server/__init__.py
--rw-r--r--  2.0 unx      609 b- defN 23-Jul-13 19:26 femtocrux/server/exceptions.py
--rw-r--r--  2.0 unx     1606 b- defN 23-Jul-13 19:26 femtocrux/server/healthcheck.py
--rw-r--r--  2.0 unx     8620 b- defN 23-Jul-13 19:26 femtocrux/server/server.py
--rw-r--r--  2.0 unx        0 b- defN 23-Jul-13 19:26 femtocrux/util/__init__.py
--rw-r--r--  2.0 unx     1086 b- defN 23-Jul-13 19:26 femtocrux/util/utils.py
--rw-r--r--  2.0 unx       36 b- defN 23-Jul-13 19:31 femtocrux-0.2.8.post2.dist-info/LICENSE
--rw-r--r--  2.0 unx     2128 b- defN 23-Jul-13 19:31 femtocrux-0.2.8.post2.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Jul-13 19:31 femtocrux-0.2.8.post2.dist-info/WHEEL
--rw-r--r--  2.0 unx       10 b- defN 23-Jul-13 19:31 femtocrux-0.2.8.post2.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     1757 b- defN 23-Jul-13 19:31 femtocrux-0.2.8.post2.dist-info/RECORD
-21 files, 49830 bytes uncompressed, 15472 bytes compressed:  69.0%
+Zip file size: 18632 bytes, number of entries: 21
+-rwxr-xr-x  2.0 unx     1389 b- defN 23-Jul-23 00:03 femtocrux/ENV_REQUIREMENTS.sh
+-rw-r--r--  2.0 unx      308 b- defN 23-Jul-23 00:03 femtocrux/PY_REQUIREMENTS
+-rw-r--r--  2.0 unx        8 b- defN 23-Jul-23 00:03 femtocrux/VERSION
+-rw-r--r--  2.0 unx      100 b- defN 23-Jul-23 00:03 femtocrux/__init__.py
+-rw-r--r--  2.0 unx      162 b- defN 23-Jul-23 00:03 femtocrux/version.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jul-23 00:03 femtocrux/client/__init__.py
+-rw-r--r--  2.0 unx    21138 b- defN 23-Jul-23 00:03 femtocrux/client/client.py
+-rw-r--r--  2.0 unx      168 b- defN 23-Jul-23 00:03 femtocrux/grpc/__init__.py
+-rw-r--r--  2.0 unx     4340 b- defN 23-Jul-23 00:07 femtocrux/grpc/compiler_service_pb2.py
+-rw-r--r--  2.0 unx     7002 b- defN 23-Jul-23 00:07 femtocrux/grpc/compiler_service_pb2_grpc.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jul-23 00:03 femtocrux/server/__init__.py
+-rw-r--r--  2.0 unx      609 b- defN 23-Jul-23 00:03 femtocrux/server/exceptions.py
+-rw-r--r--  2.0 unx     1606 b- defN 23-Jul-23 00:03 femtocrux/server/healthcheck.py
+-rw-r--r--  2.0 unx     8620 b- defN 23-Jul-23 00:03 femtocrux/server/server.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Jul-23 00:03 femtocrux/util/__init__.py
+-rw-r--r--  2.0 unx     1086 b- defN 23-Jul-23 00:03 femtocrux/util/utils.py
+-rw-r--r--  2.0 unx       36 b- defN 23-Jul-23 00:07 femtocrux-0.2.8.post3.dist-info/LICENSE
+-rw-r--r--  2.0 unx     2128 b- defN 23-Jul-23 00:07 femtocrux-0.2.8.post3.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jul-23 00:07 femtocrux-0.2.8.post3.dist-info/WHEEL
+-rw-r--r--  2.0 unx       10 b- defN 23-Jul-23 00:07 femtocrux-0.2.8.post3.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     1757 b- defN 23-Jul-23 00:07 femtocrux-0.2.8.post3.dist-info/RECORD
+21 files, 50559 bytes uncompressed, 15742 bytes compressed:  68.9%
```

## zipnote {}

```diff
@@ -42,23 +42,23 @@
 
 Filename: femtocrux/util/__init__.py
 Comment: 
 
 Filename: femtocrux/util/utils.py
 Comment: 
 
-Filename: femtocrux-0.2.8.post2.dist-info/LICENSE
+Filename: femtocrux-0.2.8.post3.dist-info/LICENSE
 Comment: 
 
-Filename: femtocrux-0.2.8.post2.dist-info/METADATA
+Filename: femtocrux-0.2.8.post3.dist-info/METADATA
 Comment: 
 
-Filename: femtocrux-0.2.8.post2.dist-info/WHEEL
+Filename: femtocrux-0.2.8.post3.dist-info/WHEEL
 Comment: 
 
-Filename: femtocrux-0.2.8.post2.dist-info/top_level.txt
+Filename: femtocrux-0.2.8.post3.dist-info/top_level.txt
 Comment: 
 
-Filename: femtocrux-0.2.8.post2.dist-info/RECORD
+Filename: femtocrux-0.2.8.post3.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## femtocrux/VERSION

```diff
@@ -1 +1 @@
-0.2.8-2
+0.2.8-3
```

## femtocrux/client/client.py

```diff
@@ -326,15 +326,15 @@
         return response.version
 
 class CompilerClient(CompilerClientImpl):
     """
     Client which spawns and interacts with the compiler server. This is the main entrypoint for femtocrux.
     """
     def __init__(self):
-        self.container = None
+        self.container = None # For __del__
 
         # Start a new docker server
         self.container = self.__create_docker_server__()
         self.__wait_for_server_ready__()
         self.__init_network_info__(self.container)
 
         # Establish a connection to the server
@@ -360,20 +360,30 @@
 
     def __init_network_info__(self, container):
         """
         For local connections only.
 
         Gets the IP address and port of the container.
         """
-        self.__channel_port__ = self.__container_port__
+        # Get container network settings
+        container.reload()
+        network_info = container.attrs['NetworkSettings']
 
-        client = self.__get_docker_api_client__()
+        # Search for the host port bound to loopback
+        bound_ports = list(network_info['Ports'].items())
+        num_bound_ports = len(bound_ports)
+        if num_bound_ports != 1:
+            raise OSError('Expected exactly one port to be bound to docker container '
+                '\'%s\'.\nFound %d.' % (container.id, num_bound_ports)
+            )
 
-        container.reload()
-        self.__channel_addr__ = container.attrs['NetworkSettings']['IPAddress']
+        # Extract the port number
+        bound_port, bound_sockets = bound_ports[0]
+        socket = bound_sockets[0] # In case of multiple, take the first one
+        self.__channel_port__ = socket['HostPort']
 
     def __connect__(self) -> Any:
         """ Establishes a gRPC connection to the server. """
 
         # Open a gRPC channel to the server 
         sock_name = '%s:%s' % (self.channel_addr, self.channel_port)
         channel = grpc.insecure_channel(
@@ -392,16 +402,20 @@
             raise OSError("Channel timed out after %s seconds. Check that the server is running." % channel_timeout_seconds) from exc
         logger.info("Connection successful.")
 
         return channel
 
     @property
     def channel_addr(self) -> str:
-        """ IP address used for the gRPC channel. """
-        return self.__channel_addr__
+        """ 
+        IP address used for the gRPC channel. 
+
+        Note that '0.0.0.0' does NOT work on Windows hosts.
+        """
+        return 'localhost'
 
     @property
     def channel_port(self) -> int:
         """
         Port used for the gRPC channel.
         """
         return self.__channel_port__
@@ -521,23 +535,27 @@
                     image_not_found_msg
                 )
 
             # Pull the image from remote
             logger.info(image_not_found_msg)    
             self.__pull_docker_image__()
 
-        # Start a container running the server
+        # Bind a random port on the host to the container's gRPC port
+        port_interface = {self.__container_port__: None}
         command = "--port %s" % self.__container_port__
+
+        # Start a container running the server
         container = client.containers.run(
             __docker_image_name__,
             command=command, # Appends entrypoint with args 
             detach=True,
             labels=[self.__container_label__],
             stderr=True,
             stdout=True,
+            ports=port_interface,
             name=self.__get_unused_container_name__(),
             auto_remove=True,
         )
 
         return container
 
     def __wait_for_server_ready__(self):
```

## Comparing `femtocrux-0.2.8.post2.dist-info/METADATA` & `femtocrux-0.2.8.post3.dist-info/METADATA`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: femtocrux
-Version: 0.2.8.post2
+Version: 0.2.8.post3
 Summary: Femtosense Compiler
 Home-page: https://github.com/femtosense/femtocrux
 Author: Femtosense
 Author-email: info@femtosense.ai
 Project-URL: Source, https://github.com/femtosense/femtocrux
 Classifier: Development Status :: 3 - Alpha
 Classifier: Intended Audience :: Developers
```

## Comparing `femtocrux-0.2.8.post2.dist-info/RECORD` & `femtocrux-0.2.8.post3.dist-info/RECORD`

 * *Files 8% similar despite different names*

```diff
@@ -1,21 +1,21 @@
 femtocrux/ENV_REQUIREMENTS.sh,sha256=t_O1B4hJAMgxvH9gwp1qls6eVFmhSYBJe64KmuK_H-4,1389
 femtocrux/PY_REQUIREMENTS,sha256=dwSA37UvBVgyXrAr-ToLV_eJIaVTgf7cnUClX0mn4rE,308
-femtocrux/VERSION,sha256=3eKVkVpER9U_3nOBSZhhDiQ3ppSMj04sWAkQLtQq5Ms,8
+femtocrux/VERSION,sha256=yGFJc8SNINnnGNDErSBsxkBO8zDsvkkxmKekFf8coSE,8
 femtocrux/__init__.py,sha256=FISQ-uQRzWFQsUVQ65YrAzS5nFz5kHZahrWzbLegA3U,100
 femtocrux/version.py,sha256=h9UchNl62V-tKFPlf2uyeVqvUBFaSi9yhH15PDy-NaQ,162
 femtocrux/client/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-femtocrux/client/client.py,sha256=1YZL78URw82tTLWPESlcRDHGGrMw5R8BVtNg_0x6XuI,20409
+femtocrux/client/client.py,sha256=_Ax3UKKawQpCUsmRZ-gyWk3XsNQZ1mav8a9rKT092YA,21138
 femtocrux/grpc/__init__.py,sha256=1otI5-T4OaWs68wSUMtwe5IXLAM02Z4hZjIW8kGAVzo,168
 femtocrux/grpc/compiler_service_pb2.py,sha256=2S0KMAhIn9Dy_KfRHlBHDWSdcWqfUJX7IZ0xMxMYaJk,4340
 femtocrux/grpc/compiler_service_pb2_grpc.py,sha256=L9EQFYMFVACngUrAEmSJDgUTSPSi3rDoG7TERg-pFq4,7002
 femtocrux/server/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 femtocrux/server/exceptions.py,sha256=Kc6HMDRfebZ1k-d_Ij_BDHZO7QgvXnzEqqgO36oM-kc,609
 femtocrux/server/healthcheck.py,sha256=mzQ_-u8xsc4VcelkvsbDTtJgdSlTBTJrDJ8mQkaGuqA,1606
 femtocrux/server/server.py,sha256=eQSDHXz-A0ucylfvti1CeC1BHRM640gKVbpiEC-O1to,8620
 femtocrux/util/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 femtocrux/util/utils.py,sha256=LVgC8nBx4x8GtndFMyczwQojSEVmLpzDieipZb9IPD4,1086
-femtocrux-0.2.8.post2.dist-info/LICENSE,sha256=eN9ZI1xHjUmFvN3TEeop5kBGXRUBfbsl55KBNBYYFqI,36
-femtocrux-0.2.8.post2.dist-info/METADATA,sha256=DncvzzC9NCbsZ9s3oWXm-8H92GaAPvoF6yqMzMdpTuQ,2128
-femtocrux-0.2.8.post2.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-femtocrux-0.2.8.post2.dist-info/top_level.txt,sha256=BkTttlioC3je__8577wxRieZqY3Abu7FOOdMnmYbcNI,10
-femtocrux-0.2.8.post2.dist-info/RECORD,,
+femtocrux-0.2.8.post3.dist-info/LICENSE,sha256=eN9ZI1xHjUmFvN3TEeop5kBGXRUBfbsl55KBNBYYFqI,36
+femtocrux-0.2.8.post3.dist-info/METADATA,sha256=cKUSBbDYvN5qMpQTI2lUFbwtBRys8jPLfJffM-eXQEs,2128
+femtocrux-0.2.8.post3.dist-info/WHEEL,sha256=AtBG6SXL3KF_v0NxLf0ehyVOh0cold-JbJYXNGorC6Q,92
+femtocrux-0.2.8.post3.dist-info/top_level.txt,sha256=BkTttlioC3je__8577wxRieZqY3Abu7FOOdMnmYbcNI,10
+femtocrux-0.2.8.post3.dist-info/RECORD,,
```

